(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(34)},28:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),o=a.n(r),l=(a(28),a(5)),s=a(7),i=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"title indent-mb-m"},"Home page"))},m=a(13),u=a(11),d=a(8),p=a.n(d),E=a(12),b=a(3),h=function(){return c.a.createElement("span",null," Loading... wait please")},f=c.a.memo(function(e){var t=e.match,a=e.phones,n=e.onAddToBasket;return c.a.createElement("div",null,a.map(function(e){var a=e.id,r=e.name,o=e.imageUrl,s=e.snippet;return c.a.createElement("div",{key:a,className:"catalog__card card"},c.a.createElement("div",{className:"card__image image-container"},c.a.createElement(l.b,{to:"".concat(t.url).concat(a)},c.a.createElement("img",{src:"https://mate-academy.github.io/phone-catalogue-static/".concat(o),alt:r}))),c.a.createElement("div",{className:"card__description"},c.a.createElement(l.b,{to:"".concat(t.url).concat(a)},c.a.createElement("h3",{className:"indent-mb-sm"},r)),c.a.createElement("p",null,s)),c.a.createElement("div",{className:"card__button"},c.a.createElement("button",{type:"button",onClick:function(){return n(a,r)}},"Add")))}))}),v=function(e){var t=e.phone,a=e.onAddToBasket,r=e.history,o=t.id,l=t.name,s=t.images,i=t.description,m=Object(n.useState)(s[0]),u=Object(b.a)(m,2),d=u[0],p=u[1];return c.a.createElement("div",{className:"section section_details"},c.a.createElement("div",{className:"section__button indent-mb-m"},c.a.createElement("button",{type:"button",onClick:r.goBack},"GO BACK")),c.a.createElement("div",{className:"section__main-content"},c.a.createElement("div",{className:"section__image"},c.a.createElement("img",{alt:l,src:"https://mate-academy.github.io/phone-catalogue-static/".concat(d)})),c.a.createElement("div",{className:"section__content"},c.a.createElement("h2",{className:"indent-mb-m"},l),c.a.createElement("p",{className:"indent-mb-l"},i),c.a.createElement("div",{className:"card__button"},c.a.createElement("button",{type:"button",onClick:function(){return a(o,l)}},"Add")))),c.a.createElement("div",{className:"section__gallery"},s.map(function(e){return c.a.createElement("img",{key:e,onClick:function(){return function(e){p(e)}(e)},alt:l,src:"https://mate-academy.github.io/phone-catalogue-static/".concat(e)})})))},g=c.a.memo(function(e){var t=e.match,a=e.history,r=e.onAddToBasket,o=Object(n.useState)([]),l=Object(b.a)(o,2),s=l[0],i=l[1],m=Object(n.useState)(0),u=Object(b.a)(m,2),d=u[0],f=u[1],g=Object(n.useState)(0),y=Object(b.a)(g,2),k=y[0],j=y[1];return Object(n.useEffect)(function(){Object(E.a)(p.a.mark(function e(){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones/".concat(t.params.id,".json"));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,i(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))(),setTimeout(function(){return f(!0)},1e3)},[]),c.a.createElement("div",null,k?c.a.createElement("div",{className:"error"},"Sorry, phone not found"):c.a.createElement(c.a.Fragment,null,d?c.a.createElement("div",null,c.a.createElement(v,{phone:s,history:a,onAddToBasket:r})):c.a.createElement(h,null)))}),y=function(e){var t=e.onFilterPhones,a=e.onSortPhonesBy;return c.a.createElement("form",null,c.a.createElement("div",{className:"inputs-field indent-mb-m"},c.a.createElement("div",{className:"input-block"},c.a.createElement("label",{htmlFor:"input-filter"},"Search:"),c.a.createElement("input",{id:"input-filter",onChange:t})),c.a.createElement("div",{className:"input-block"},c.a.createElement("label",{htmlFor:"select-sort"},"Sort by: "),c.a.createElement("select",{id:"select-sort",onChange:a},c.a.createElement("option",{value:"age"},"Newest"),c.a.createElement("option",{value:"name"},"Alphabetical")))))},k=function(e){var t=e.basketItems,a=e.onRemoveFormBasket,n=e.onChangeQuantity;return c.a.createElement("div",{className:"basket indent-mb-m"},c.a.createElement("h4",null,"Basket:"),c.a.createElement("ul",null,t.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement("div",{className:"basket__item"},c.a.createElement("div",{className:"basket__title indent-mb-s"},c.a.createElement(l.b,{to:"/phones/".concat(e.id)},e.name)),c.a.createElement("div",{className:"basket__quantity"},c.a.createElement("div",{className:"basket__button"},c.a.createElement("button",{type:"button",name:"decrease",onClick:function(){return n("decrease",e.id)}},"-")),c.a.createElement("span",null,e.quantity),c.a.createElement("div",{className:"basket__button"},c.a.createElement("button",{type:"button",name:"increase",onClick:function(){return n("increase",e.id)}},"+"))),c.a.createElement("div",{className:"basket__button"},c.a.createElement("button",{type:"button",name:"remove",onClick:function(){return a(e.id)}},"x"))))})))},j=function(e){var t=e.history,a=e.location,r=Object(n.useState)([]),o=Object(b.a)(r,2),l=o[0],i=o[1],d=Object(n.useState)([]),v=Object(b.a)(d,2),j=v[0],O=v[1],N=Object(n.useState)(!1),_=Object(b.a)(N,2),S=_[0],w=_[1],x=Object(n.useState)([]),q=Object(b.a)(x,2),C=q[0],B=q[1],A=Object(n.useState)(""),I=Object(b.a)(A,2),P=I[0],F=I[1],T=Object(n.useState)(0),L=Object(b.a)(T,2),R=L[0],J=L[1],U=a.search;Object(n.useEffect)(function(){Object(E.a)(p.a.mark(function e(){var t,a,n,c,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones.json");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,i(a),n=new URLSearchParams(U),c=n.get("query")||"",r=n.get("sort")||"",F(c),J(r),O(Q(G(a,c),r)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),i([]);case 19:case"end":return e.stop()}},e,null,[[0,16]])}))(),localStorage.getItem("basketItems")&&B(JSON.parse(localStorage.getItem("basketItems"))),w(!0)},[]),Object(n.useEffect)(function(){localStorage.setItem("basketItems",JSON.stringify(C))},[C]),Object(n.useEffect)(function(){var e=new URLSearchParams(U),t=e.get("query")||"",a=e.get("sort")||"";F(t),J(a)},[t]),Object(n.useEffect)(function(){var e=new URLSearchParams;e.append("query",P.toString()),e.append("sort",R.toString()),U!=="?".concat(e.toString())&&t.push({pathname:"/phones/",search:"?".concat(e.toString())}),O(Q(G(l,P),R))},[P,R]);var H=function(e,t){var a=Object(u.a)(C),n=a.findIndex(function(t){return t.id===e});n>-1?(a[n]=Object(m.a)({},a[n],{quantity:a[n].quantity+1}),B(a)):B([].concat(Object(u.a)(a),[{id:e,name:t,quantity:1}]))},Q=function(e,t){switch(t){case"name":return e.sort(function(e,t){return e.name.localeCompare(t.name)});case"age":return e.sort(function(e,t){return e.age-t.age});default:return e}},G=function(e,t){return e.filter(function(e){return[e.name,e.snippet].join("").toLowerCase().includes(t)})};return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"sidebar"},c.a.createElement(y,{onFilterPhones:function(e){F(e.target.value.toLowerCase().trim())},onSortPhonesBy:function(e){J(e.target.value)}}),c.a.createElement(k,{basketItems:C,onChangeQuantity:function(e,t){var a=Object(u.a)(C),n=Object(u.a)(C).findIndex(function(e){return e.id===t});switch(e){case"increase":a[n]=Object(m.a)({},a[n],{quantity:a[n].quantity+1}),B(a);break;case"decrease":a[n].quantity>=2&&(a[n]=Object(m.a)({},a[n],{quantity:a[n].quantity-1}),B(a));break;default:B(a)}},onRemoveFormBasket:function(e){B(C.filter(function(t){return t.id!==e}))}})),c.a.createElement("div",null,c.a.createElement("h1",{className:"title indent-mb-m"},"Phone catalog"),S?c.a.createElement("div",null,c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/phones/:id",exact:!0,render:function(e){var a=e.match;return c.a.createElement(g,{match:a,history:t,onAddToBasket:H})}}),c.a.createElement(s.a,{path:"/phones/:queryParams?",exact:!0,render:function(e){var t=e.match;return c.a.createElement(f,{match:t,phones:j,onAddToBasket:H})}}))):c.a.createElement(h,null)))},O=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"Sorry, page not found"))},N=function(){return c.a.createElement("nav",{className:"nav"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(l.c,{to:"/",exact:!0},"Home page")),c.a.createElement("li",null,c.a.createElement(l.c,{to:{pathname:"/phones",search:"?&query=&sort="}},"Phones page"))))},_=function(){return c.a.createElement(l.a,null,c.a.createElement("div",{className:"App"},c.a.createElement("header",null,c.a.createElement(N,null)),c.a.createElement("main",null,c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/",exact:!0,component:i}),c.a.createElement(s.a,{path:"/phones",render:function(e){var t=e.match,a=e.location,n=e.history;return c.a.createElement(j,{match:t,location:a,history:n})}}),c.a.createElement(s.a,{component:O})))))};o.a.render(c.a.createElement(_,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.229ee446.chunk.js.map