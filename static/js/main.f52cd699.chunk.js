(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(50)},35:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(12),s=a(9),i=a(3),m=(a(35),a(11)),u=a(51),p=a(52),f=a(14),d=a.n(f),E=r.a.memo(function(e){var t=e.text,a=e.addClassName,n=t.replace(/ /g,"\xa0").split("").map(function(e,t){return r.a.createElement("div",{className:"charm",style:{animationDelay:"".concat(50*t,"ms")},key:d.a.generate()},e)});return r.a.createElement("div",{className:"charm-wrapper ".concat(a)},n)}),h=function(){return r.a.createElement("section",{className:"d-flex align-items-center justify-content-center section section_cover"},r.a.createElement("div",null,r.a.createElement("h1",{className:"title indent-mb-m"},r.a.createElement(E,{text:"Homepage",addClassName:"charm-wrapper_scale"}))))},g=a(15),b=a.n(g),v=a(18),y=function(){return r.a.createElement("span",null," Loading... wait please")},O=a(5),k=r.a.memo(function(e){var t=e.match,a=e.phones,n=e.onAddToBasket;return r.a.createElement("div",{className:"catalog fix-container2 indent-mb-l"},a.map(function(e,a){var c=e.id,l=e.name,o=e.imageUrl,s=e.snippet;return r.a.createElement("div",{key:c,className:"catalog__card card",style:{animationDelay:"".concat(100*a,"ms")}},r.a.createElement("div",{className:"card__image image-container indent-mb-sm"},r.a.createElement(O.b,{to:"".concat(t.url).concat(c)},r.a.createElement("img",{src:"https://mate-academy.github.io/phone-catalogue-static/".concat(o),alt:l}))),r.a.createElement("div",{className:"card__description indent-mb-sm"},r.a.createElement(O.b,{to:"".concat(t.url).concat(c)},r.a.createElement("h3",{className:"indent-mb-sm"},l)),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"card__button"},r.a.createElement("button",{type:"button",onClick:function(){return n(c,l)}},"BUY")))}))}),N=function(e){var t=e.onFilterPhones,a=e.onSortPhonesBy,n=e.sortValue,c=e.searchValue;return r.a.createElement("form",null,r.a.createElement("div",{className:"inputs-field indent-mb-m"},r.a.createElement("div",{className:"input-block"},r.a.createElement("label",{htmlFor:"input-filter"},"Search:"),r.a.createElement("input",{id:"input-filter",onChange:t,value:c})),r.a.createElement("div",{className:"input-block"},r.a.createElement("label",{htmlFor:"select-sort"},"Sort by: "),r.a.createElement("select",{id:"select-sort",onChange:a,value:n},r.a.createElement("option",{value:"age"},"Newest"),r.a.createElement("option",{value:"name"},"Alphabetical")))))},j=r.a.memo(function(e){var t=e.withInfo,a=e.currentPage,n=e.buttons,c=e.onPageChange,l=function(){return r.a.createElement("li",{className:"page-item disabled"},r.a.createElement("button",{className:"page-link custom-page-link",type:"button"},"..."))},o=function(e){var t=e.toLowerCase().trim().includes("prev")?n[0]:n.length;return r.a.createElement("li",{className:"page-item ".concat(a===t?"disabled":"")},r.a.createElement("button",{className:"page-link custom-page-link",type:"button",id:t,name:e,onClick:c},e))},s=function(e,t){return r.a.createElement("li",{key:d.a.generate(),className:"page-item ".concat(a===e?"active":"")},r.a.createElement("button",{className:"page-link custom-page-link",type:"button",id:e,name:t,onClick:c},e))};return r.a.createElement("div",{className:"d-flex flex-wrap justify-content-between align-items-center"},r.a.createElement("div",{className:"mb-2 pagination-info"},r.a.createElement("span",null,t)),r.a.createElement("nav",{"aria-label":"Page navigation",className:""},r.a.createElement("ul",{className:"pagination justify-content-center"},o("Previous"),1===n.length?"":s(1,"numbers"),a<4?"":l(),n.filter(function(e){return 1!==e&&e!==n.length&&(e===a-1||e===a||e===a+1)}).map(function(e){return s(e,"numbers")}),a>n.length-3?"":l(),0===n.length?"":s(n.length,"numbers"),o("Next"))))}),w=function(e,t){for(var a=[],n=1;n<=Math.ceil(t/e);n+=1)a.push(n);return a},x=function(e){var t=e.history,a=e.location,c=e.onAddToBasket,l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1],p=Object(n.useState)([]),f=Object(i.a)(p,2),h=f[0],g=f[1],O=Object(n.useState)(!1),x=Object(i.a)(O,2),S=x[0],C=x[1],_=Object(n.useState)(""),P=Object(i.a)(_,2),B=P[0],q=P[1],I=Object(n.useState)(0),U=Object(i.a)(I,2),A=U[0],F=U[1],T=Object(n.useState)(1),G=Object(i.a)(T,2),L=G[0],D=G[1],R=Object(n.useState)(5),J=Object(i.a)(R,2),M=J[0],V=J[1],Y=Object(n.useState)([]),H=Object(i.a)(Y,2),Q=H[0],K=H[1],X=[3,5,10,20],z=a.search;Object(n.useEffect)(function(){Object(v.a)(b.a.mark(function e(){var t,a,n,r,c,l,o,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones.json");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,u(a),n=new URLSearchParams(z),r=n.get("query")||"",c=n.get("sort")||"",l=n.get("page")||1,o=n.get("perPage")||5,q(r),F(c),D(+l),V(+o),s=$(ee(a,r),c),K(w(o,s.length)),g(s),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),u([]);case 25:case"end":return e.stop()}},e,null,[[0,22]])}))(),C(!0)},[]),Object(n.useEffect)(function(){var e=new URLSearchParams(z),t=e.get("query")||B,a=e.get("sort")||A,n=e.get("page")||L,r=e.get("perPage")||M;D(n),V(r),q(t),F(a)},[t]),Object(n.useEffect)(function(){var e=new URLSearchParams;e.append("query",B.toString()),e.append("sort",A.toString()),e.append("page",L.toString()),e.append("perPage",M.toString()),z!=="?".concat(e.toString())&&t.push({pathname:"/phones/",search:"?".concat(e.toString())});var a=$(ee(s,B),A);g(a),K(w(M,a.length))},[B,A,M,L]);var W=function(e){D(1),q(e.target.value.toLowerCase())},Z=function(e){F(e.target.value)},$=function(e,t){switch(t){case"name":return e.sort(function(e,t){return e.name.localeCompare(t.name)});case"age":return e.sort(function(e,t){return e.age-t.age});default:return e}},ee=function(e,t){return e.filter(function(e){return[e.name,e.snippet].join("").toLowerCase().includes(t.trim())})},te=function(e){var t=e.target,a=t.name,n=t.id;K(w(M,h.length)),a.toLowerCase().trim().includes("next")&&L<Q.length?D(L+1):a.toLowerCase().trim().includes("prev")&&L>1?D(L-1):D(+n)},ae=function(e){var t=e.target.value;V(+t),D(1)},ne=L*M,re=ne-M,ce="Showing ".concat(h.length>0?re+1:0," to ").concat(ne>h.length?h.length:ne,"\n    of ").concat(h.length," phones"),le=h.slice(re,ne);return r.a.createElement("section",{className:"section"},r.a.createElement("div",null,r.a.createElement("div",{className:"indent-mb-m"},r.a.createElement("h1",{className:"title title_subpages"},r.a.createElement(E,{text:"Phones catalog"}))),r.a.createElement("div",{className:"sidebar"},r.a.createElement(m.a,{path:"/phones/",exact:!0,render:function(){return r.a.createElement(N,{onFilterPhones:W,onSortPhonesBy:Z,sortValue:A,searchValue:B})}}),r.a.createElement(m.a,{path:"/phones/",exact:!0,render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("div",{className:"input-block"},r.a.createElement("label",{htmlFor:"formControlSelect"},"Show per page"),r.a.createElement("select",{onChange:ae,id:"formControlSelect",value:M},X.map(function(e){return r.a.createElement("option",{key:d.a.generate(),value:e},e)})))))}})),S?r.a.createElement("div",null,r.a.createElement(m.a,{path:"/phones/:queryParams?",exact:!0,render:function(e){var t=e.match;return r.a.createElement(k,{match:t,phones:le,onAddToBasket:c})}})):r.a.createElement(y,null),r.a.createElement(m.a,{path:"/phones/",exact:!0,render:function(){return r.a.createElement(j,{buttons:Q,currentPage:L,withInfo:ce,onPageChange:te})}})))},S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Sorry, page not found"))},C=function(e){var t=e.basketItems,a=e.onRemoveFormBasket,n=e.onChangeQuantity;return r.a.createElement("div",{className:"basket d-flex flex-column align-items-center justify-content-center indent-mb-m"},r.a.createElement("h4",{className:"title title_subpages indent-mb-m"},r.a.createElement(E,{text:"Your basket:"})),t.length>0?r.a.createElement(p.a,{component:"ul"},t.map(function(e){return r.a.createElement(u.a,{key:e.id,timeout:500,classNames:"fade",appear:!0},r.a.createElement("li",null,r.a.createElement("div",{className:"basket__item"},r.a.createElement("div",{className:"basket__title indent-mb-s"},r.a.createElement(O.b,{to:"/phones/".concat(e.id)},e.name)),r.a.createElement("div",{className:"basket__quantity"},r.a.createElement("div",{className:"basket__button"},r.a.createElement("button",{type:"button",name:"decrease",onClick:function(){return n("decrease",e.id)}},"-")),r.a.createElement("span",{className:"quantity"},e.quantity),r.a.createElement("div",{className:"basket__button"},r.a.createElement("button",{type:"button",name:"increase",onClick:function(){return n("increase",e.id)}},"+"))),r.a.createElement("div",{className:"basket__button"},r.a.createElement("button",{type:"button",name:"remove",onClick:function(){return a(e.id)}},"x")))))})):r.a.createElement("span",{className:"title title_h5"},"empty"))},_=function(e){return e.map(function(e){return e.quantity}).reduce(function(e,t){return e+t},0)},P=function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{fill:"#ff1f48",width:"100%",height:"100%"}),r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:"a",cx:"0",cy:"800",r:"800",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{offset:"0",stopColor:"#ff7922"}),r.a.createElement("stop",{offset:"1",stopColor:"#ff7922",stopOpacity:"0"})),r.a.createElement("radialGradient",{id:"b",cx:"1200",cy:"800",r:"800",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{offset:"0",stopColor:"#ff10e3"}),r.a.createElement("stop",{offset:"1",stopColor:"#ff10e3",stopOpacity:"0"})),r.a.createElement("radialGradient",{id:"c",cx:"600",cy:"0",r:"600",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{offset:"0",stopColor:"#ff135c"}),r.a.createElement("stop",{offset:"1",stopColor:"#ff135c",stopOpacity:"0"})),r.a.createElement("radialGradient",{id:"d",cx:"600",cy:"800",r:"600",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{offset:"0",stopColor:"#ff1f48"}),r.a.createElement("stop",{offset:"1",stopColor:"#ff1f48",stopOpacity:"0"})),r.a.createElement("radialGradient",{id:"e",cx:"0",cy:"0",r:"800",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{offset:"0",stopColor:"#fff826"}),r.a.createElement("stop",{offset:"1",stopColor:"#fff826",stopOpacity:"0"})),r.a.createElement("radialGradient",{id:"f",cx:"1200",cy:"0",r:"800",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{offset:"0",stopColor:"#6a00ff"}),r.a.createElement("stop",{offset:"1",stopColor:"#6a00ff",stopOpacity:"0"}))),r.a.createElement("rect",{fill:"url(#a)",width:"100%",height:"100%"}),r.a.createElement("rect",{fill:"url(#b)",width:"100%",height:"100%"}),r.a.createElement("rect",{fill:"url(#c)",width:"100%",height:"100%"}),r.a.createElement("rect",{fill:"url(#d)",width:"100%",height:"100%"}),r.a.createElement("rect",{fill:"url(#e)",width:"100%",height:"100%"}),r.a.createElement("rect",{fill:"url(#f)",width:"100%",height:"100%"}))},B=a(22),q=(a(49),{tension:1200,friction:40}),I={mass:10,tension:200,friction:50},U=function(e,t){return"translate3d(".concat(e,"px,").concat(t,"px,0) translate3d(-50%,-50%,0)")},A=function(){var e=Object(B.b)(3,function(){return{xy:[0,0],config:function(e){return 0===e?q:I}}}),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{className:"goo-svg",style:{position:"absolute",width:0,height:0}},r.a.createElement("filter",{id:"goo"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",result:"blur",stdDeviation:"30"}),r.a.createElement("feColorMatrix",{in:"blur",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 30 -7"}))),r.a.createElement("div",{className:"hooks-main",onMouseMove:function(e){return n({xy:[e.clientX,e.clientY]})}},a.map(function(e,t){return r.a.createElement(B.a.div,{key:t,style:{transform:e.xy.interpolate(U)}})})))},F=function(e){var t=e.totalBasketItems;return r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(O.c,{to:"/",exact:!0},r.a.createElement("span",null,"Home"))),r.a.createElement("li",null,r.a.createElement(O.c,{to:{pathname:"/phones/",search:"?&query=&sort="}},r.a.createElement("span",null,"Store"))),r.a.createElement("li",null,r.a.createElement(O.c,{to:"/basket"},r.a.createElement("span",null,"Basket "),t>0?r.a.createElement("span",{className:"badge badge-pill badge-dark"},t):""))))},T=function(e){var t=e.children,a=e.totalBasketItems;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"background"},r.a.createElement(P,null)),r.a.createElement(A,null),r.a.createElement("header",null,r.a.createElement(F,{totalBasketItems:a})),t)},G=function(e){var t=e.phone,a=e.onAddToBasket,c=t.id,l=t.name,o=t.images,s=t.description,m=Object(n.useState)(o[0]),u=Object(i.a)(m,2),p=u[0],f=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section__main-content"},r.a.createElement("div",{className:"section__image"},r.a.createElement("img",{key:p,alt:l,src:"https://mate-academy.github.io/phone-catalogue-static/".concat(p)})),r.a.createElement("div",{className:"section__content"},r.a.createElement("h2",{className:"indent-mb-m"},l),r.a.createElement("p",{className:"indent-mb-l"},s),r.a.createElement("div",{className:"card__button"},r.a.createElement("button",{type:"button",onClick:function(){return a(c,l)}},"Add")))),r.a.createElement("div",{className:"section__gallery gallery"},o.map(function(e,t){return r.a.createElement("div",{key:e,className:"gallery__image",style:{animationDelay:"".concat(100*t,"ms")}},r.a.createElement("img",{onClick:function(){return function(e){f(e)}(e)},alt:l,src:"https://mate-academy.github.io/phone-catalogue-static/".concat(e)}))})))},L=r.a.memo(function(e){var t=e.match,a=e.history,c=e.onAddToBasket,l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],m=o[1],u=Object(n.useState)(0),p=Object(i.a)(u,2),f=p[0],d=p[1],E=Object(n.useState)(0),h=Object(i.a)(E,2),g=h[0],O=h[1];return Object(n.useEffect)(function(){Object(v.a)(b.a.mark(function e(){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.params),e.next=4,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones/".concat(t.params.id,".json"));case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,m(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),O(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}))(),setTimeout(function(){return d(!0)},1e3)},[]),r.a.createElement("div",{className:"section section_details"},r.a.createElement("div",{className:"section__button indent-mb-m"},r.a.createElement("button",{type:"button",onClick:a.goBack},"GO BACK")),g?r.a.createElement("div",{className:"error"},"Sorry, phone not found"):r.a.createElement(r.a.Fragment,null,f?r.a.createElement(G,{phone:s,onAddToBasket:c}):r.a.createElement(y,null)))});function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var J=function(e){return r.a.createElement(u.a,Object.assign({},e,{classNames:"fadeTranslate",timeout:1e3,mountOnEnter:!0,unmountOnExit:!0}))},M=function(e){var t=e.location.pathname,a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)(function(){localStorage.getItem("basketItems")&&o(JSON.parse(localStorage.getItem("basketItems")))},[]),Object(n.useEffect)(function(){localStorage.setItem("basketItems",JSON.stringify(l))},[l]);var u=function(e,t){var a=Object(s.a)(l),n=a.findIndex(function(t){return t.id===e});n>-1?(a[n]=R({},a[n],{quantity:a[n].quantity+1}),o(a)):o([].concat(Object(s.a)(a),[{id:e,name:t,quantity:1}]))},f=function(e){o(l.filter(function(t){return t.id!==e}))},d=function(e,t){var a=Object(s.a)(l),n=Object(s.a)(l).findIndex(function(e){return e.id===t});switch(e){case"increase":a[n]=R({},a[n],{quantity:a[n].quantity+1}),o(a);break;case"decrease":a[n].quantity>=2&&(a[n]=R({},a[n],{quantity:a[n].quantity-1}),o(a));break;default:o(a)}},E=_(l);return r.a.createElement(T,{totalBasketItems:E},r.a.createElement(p.a,null,r.a.createElement(J,{key:t},r.a.createElement("main",{className:"fix-container"},r.a.createElement(m.c,{location:e.location},r.a.createElement(m.a,{path:"/",exact:!0,component:h}),r.a.createElement(m.a,{exact:!0,path:"/phones",render:function(e){var t=e.match,a=e.location,n=e.history;return r.a.createElement(x,{match:t,location:a,history:n,onAddToBasket:u})}}),r.a.createElement(m.a,{path:"/phones/:id",exact:!0,render:function(e){var t=e.match,a=e.history;return r.a.createElement(L,{match:t,history:a,onAddToBasket:u})}}),r.a.createElement(m.a,{path:"/basket",exact:!0,render:function(e){return e.match,r.a.createElement(C,{basketItems:l,onChangeQuantity:d,onRemoveFormBasket:f})}}),r.a.createElement(m.a,{component:S}))))))};l.a.render(r.a.createElement(function(){return r.a.createElement(O.a,null,r.a.createElement(m.a,{path:"/",component:M}))},null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.f52cd699.chunk.js.map