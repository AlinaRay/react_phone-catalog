(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(44)},30:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(22),l=a.n(r),o=(a(30),a(5)),s=a(7),i=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"title indent-mb-m"},"Home page"))},m=a(15),u=a(11),d=a(8),p=a.n(d),b=a(13),h=a(2),E=a(14),f=a.n(E),g=function(){return c.a.createElement("span",null," Loading... wait please")},v=c.a.memo(function(e){var t=e.match,a=e.phones,n=e.onAddToBasket;return c.a.createElement("div",null,a.map(function(e){var a=e.id,r=e.name,l=e.imageUrl,s=e.snippet;return c.a.createElement("div",{key:a,className:"catalog__card card"},c.a.createElement("div",{className:"card__image image-container"},c.a.createElement(o.b,{to:"".concat(t.url).concat(a)},c.a.createElement("img",{src:"https://mate-academy.github.io/phone-catalogue-static/".concat(l),alt:r}))),c.a.createElement("div",{className:"card__description"},c.a.createElement(o.b,{to:"".concat(t.url).concat(a)},c.a.createElement("h3",{className:"indent-mb-sm"},r)),c.a.createElement("p",null,s)),c.a.createElement("div",{className:"card__button"},c.a.createElement("button",{type:"button",onClick:function(){return n(a,r)}},"Add")))}))}),y=function(e){var t=e.phone,a=e.onAddToBasket,r=e.history,l=t.id,o=t.name,s=t.images,i=t.description,m=Object(n.useState)(s[0]),u=Object(h.a)(m,2),d=u[0],p=u[1];return c.a.createElement("div",{className:"section section_details"},c.a.createElement("div",{className:"section__button indent-mb-m"},c.a.createElement("button",{type:"button",onClick:r.goBack},"GO BACK")),c.a.createElement("div",{className:"section__main-content"},c.a.createElement("div",{className:"section__image"},c.a.createElement("img",{alt:o,src:"https://mate-academy.github.io/phone-catalogue-static/".concat(d)})),c.a.createElement("div",{className:"section__content"},c.a.createElement("h2",{className:"indent-mb-m"},o),c.a.createElement("p",{className:"indent-mb-l"},i),c.a.createElement("div",{className:"card__button"},c.a.createElement("button",{type:"button",onClick:function(){return a(l,o)}},"Add")))),c.a.createElement("div",{className:"section__gallery"},s.map(function(e){return c.a.createElement("img",{key:e,onClick:function(){return function(e){p(e)}(e)},alt:o,src:"https://mate-academy.github.io/phone-catalogue-static/".concat(e)})})))},k=c.a.memo(function(e){var t=e.match,a=e.history,r=e.onAddToBasket,l=Object(n.useState)([]),o=Object(h.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(0),u=Object(h.a)(m,2),d=u[0],E=u[1],f=Object(n.useState)(0),v=Object(h.a)(f,2),k=v[0],N=v[1];return Object(n.useEffect)(function(){Object(b.a)(p.a.mark(function e(){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones/".concat(t.params.id,".json"));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,i(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),N(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))(),setTimeout(function(){return E(!0)},1e3)},[]),c.a.createElement("div",null,k?c.a.createElement("div",{className:"error"},"Sorry, phone not found"):c.a.createElement(c.a.Fragment,null,d?c.a.createElement("div",null,c.a.createElement(y,{phone:s,history:a,onAddToBasket:r})):c.a.createElement(g,null)))}),N=function(e){var t=e.onFilterPhones,a=e.onSortPhonesBy,n=e.sortValue,r=e.searchValue;return c.a.createElement("form",null,c.a.createElement("div",{className:"inputs-field indent-mb-m"},c.a.createElement("div",{className:"input-block"},c.a.createElement("label",{htmlFor:"input-filter"},"Search:"),c.a.createElement("input",{id:"input-filter",onChange:t,value:r})),c.a.createElement("div",{className:"input-block"},c.a.createElement("label",{htmlFor:"select-sort"},"Sort by: "),c.a.createElement("select",{id:"select-sort",onChange:a,value:n},c.a.createElement("option",{value:"age"},"Newest"),c.a.createElement("option",{value:"name"},"Alphabetical")))))},j=function(e){var t=e.basketItems,a=e.onRemoveFormBasket,n=e.onChangeQuantity;return c.a.createElement("div",{className:"basket indent-mb-m"},c.a.createElement("h4",null,"Basket:"),c.a.createElement("ul",null,t.map(function(e){return c.a.createElement("li",{key:e.id},c.a.createElement("div",{className:"basket__item"},c.a.createElement("div",{className:"basket__title indent-mb-s"},c.a.createElement(o.b,{to:"/phones/".concat(e.id)},e.name)),c.a.createElement("div",{className:"basket__quantity"},c.a.createElement("div",{className:"basket__button"},c.a.createElement("button",{type:"button",name:"decrease",onClick:function(){return n("decrease",e.id)}},"-")),c.a.createElement("span",null,e.quantity),c.a.createElement("div",{className:"basket__button"},c.a.createElement("button",{type:"button",name:"increase",onClick:function(){return n("increase",e.id)}},"+"))),c.a.createElement("div",{className:"basket__button"},c.a.createElement("button",{type:"button",name:"remove",onClick:function(){return a(e.id)}},"x"))))})))},O=c.a.memo(function(e){var t=e.withInfo,a=e.currentPage,n=e.buttons,r=e.onPageChange,l=function(){return c.a.createElement("li",{className:"page-item disabled"},c.a.createElement("button",{className:"page-link",type:"button"},"..."))},o=function(e){var t=e.toLowerCase().trim().includes("prev")?n[0]:n.length;return c.a.createElement("li",{className:"page-item ".concat(a===t?"disabled":"")},c.a.createElement("button",{className:"page-link",type:"button",id:t,name:e,onClick:r},e))},s=function(e,t){return c.a.createElement("li",{key:f.a.generate(),className:"page-item ".concat(a===e?"active":"")},c.a.createElement("button",{className:"page-link",type:"button",id:e,name:t,onClick:r},e))};return c.a.createElement("div",{className:"d-flex flex-wrap justify-content-between align-items-center"},c.a.createElement("div",{className:"mb-2"},c.a.createElement("span",null,t)),c.a.createElement("nav",{"aria-label":"Page navigation",className:""},c.a.createElement("ul",{className:"pagination justify-content-center"},o("Previous"),1===n.length?"":s(1,"numbers"),a<4?"":l(),n.filter(function(e){return 1!==e&&e!==n.length&&(e===a-1||e===a||e===a+1)}).map(function(e){return s(e,"numbers")}),a>n.length-3?"":l(),0===n.length?"":s(n.length,"numbers"),o("Next"))))}),S=function(e,t){for(var a=[],n=1;n<=Math.ceil(t/e);n+=1)a.push(n);return a},_=function(e){var t=e.history,a=e.location,r=Object(n.useState)([]),l=Object(h.a)(r,2),o=l[0],i=l[1],d=Object(n.useState)([]),E=Object(h.a)(d,2),y=E[0],_=E[1],w=Object(n.useState)(!1),C=Object(h.a)(w,2),x=C[0],P=C[1],q=Object(n.useState)([]),B=Object(h.a)(q,2),A=B[0],I=B[1],F=Object(n.useState)(""),L=Object(h.a)(F,2),T=L[0],R=L[1],J=Object(n.useState)(0),U=Object(h.a)(J,2),V=U[0],H=U[1],Q=Object(n.useState)(1),G=Object(h.a)(Q,2),K=G[0],M=G[1],z=Object(n.useState)(5),D=Object(h.a)(z,2),W=D[0],X=D[1],Y=Object(n.useState)([]),Z=Object(h.a)(Y,2),$=Z[0],ee=Z[1],te=[3,5,10,20],ae=a.search;Object(n.useEffect)(function(){Object(b.a)(p.a.mark(function e(){var t,a,n,c,r,l,o,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mate-academy.github.io/phone-catalogue-static/api/phones.json");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,i(a),n=new URLSearchParams(ae),c=n.get("query")||"",r=n.get("sort")||"",l=n.get("page")||1,o=n.get("perPage")||5,R(c),H(r),M(+l),X(+o),s=le(oe(a,c),r),ee(S(o,s.length)),_(s),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),i([]);case 25:case"end":return e.stop()}},e,null,[[0,22]])}))(),localStorage.getItem("basketItems")&&I(JSON.parse(localStorage.getItem("basketItems"))),P(!0)},[]),Object(n.useEffect)(function(){localStorage.setItem("basketItems",JSON.stringify(A))},[A]),Object(n.useEffect)(function(){var e=new URLSearchParams(ae),t=e.get("query")||T,a=e.get("sort")||V,n=e.get("page")||K,c=e.get("perPage")||W;M(n),X(c),R(t),H(a)},[t]),Object(n.useEffect)(function(){var e=new URLSearchParams;e.append("query",T.toString()),e.append("sort",V.toString()),e.append("page",K.toString()),e.append("perPage",W.toString()),ae!=="?".concat(e.toString())&&t.push({pathname:"/phones/",search:"?".concat(e.toString())});var a=le(oe(o,T),V);_(a),ee(S(W,a.length))},[T,V,W,K]);var ne=function(e,t){var a=Object(u.a)(A),n=a.findIndex(function(t){return t.id===e});n>-1?(a[n]=Object(m.a)({},a[n],{quantity:a[n].quantity+1}),I(a)):I([].concat(Object(u.a)(a),[{id:e,name:t,quantity:1}]))},ce=function(e){M(1),R(e.target.value.toLowerCase())},re=function(e){H(e.target.value)},le=function(e,t){switch(t){case"name":return e.sort(function(e,t){return e.name.localeCompare(t.name)});case"age":return e.sort(function(e,t){return e.age-t.age});default:return e}},oe=function(e,t){return e.filter(function(e){return[e.name,e.snippet].join("").toLowerCase().includes(t.trim())})},se=function(e){var t=e.target,a=t.name,n=t.id;ee(S(W,y.length)),a.toLowerCase().trim().includes("next")&&K<$.length?M(K+1):a.toLowerCase().trim().includes("prev")&&K>1?M(K-1):M(+n)},ie=function(e){var t=e.target.value;X(+t),M(1)},me=K*W,ue=me-W,de="Showing ".concat(y.length>0?ue+1:0," to ").concat(me>y.length?y.length:me,"\n    of ").concat(y.length," phones"),pe=y.slice(ue,me);return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"sidebar"},c.a.createElement(s.a,{path:"/phones/",exact:!0,render:function(){return c.a.createElement(N,{onFilterPhones:ce,onSortPhonesBy:re,sortValue:V,searchValue:T})}}),c.a.createElement(j,{basketItems:A,onChangeQuantity:function(e,t){var a=Object(u.a)(A),n=Object(u.a)(A).findIndex(function(e){return e.id===t});switch(e){case"increase":a[n]=Object(m.a)({},a[n],{quantity:a[n].quantity+1}),I(a);break;case"decrease":a[n].quantity>=2&&(a[n]=Object(m.a)({},a[n],{quantity:a[n].quantity-1}),I(a));break;default:I(a)}},onRemoveFormBasket:function(e){I(A.filter(function(t){return t.id!==e}))}}),c.a.createElement(s.a,{path:"/phones/",exact:!0,render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",null,c.a.createElement("label",{className:"custom-form-control",htmlFor:"formControlSelect"},"Show",c.a.createElement("select",{onChange:ie,id:"formControlSelect",className:"form-control",value:W},te.map(function(e){return c.a.createElement("option",{key:f.a.generate(),value:e},e)})),"countries")),c.a.createElement(O,{buttons:$,currentPage:K,withInfo:de,onPageChange:se}))}})),c.a.createElement("div",null,c.a.createElement("h1",{className:"title indent-mb-m"},"Phone catalog"),x?c.a.createElement("div",null,c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/phones/:id",exact:!0,render:function(e){var a=e.match;return c.a.createElement(k,{match:a,history:t,onAddToBasket:ne})}}),c.a.createElement(s.a,{path:"/phones/:queryParams?",exact:!0,render:function(e){var t=e.match;return c.a.createElement(v,{match:t,phones:pe,onAddToBasket:ne})}}))):c.a.createElement(g,null)))},w=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"Sorry, page not found"))},C=function(){return c.a.createElement("nav",{className:"nav"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(o.c,{to:"/",exact:!0},"Home page")),c.a.createElement("li",null,c.a.createElement(o.c,{to:{pathname:"/phones/",search:"?&query=&sort="}},"Phones page"))))},x=function(){return c.a.createElement(o.a,null,c.a.createElement("div",{className:"App"},c.a.createElement("header",null,c.a.createElement(C,null)),c.a.createElement("main",null,c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/",exact:!0,component:i}),c.a.createElement(s.a,{path:"/phones",render:function(e){var t=e.match,a=e.location,n=e.history;return c.a.createElement(_,{match:t,location:a,history:n})}}),c.a.createElement(s.a,{component:w})))))};l.a.render(c.a.createElement(x,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.73504108.chunk.js.map